<div
  class="tui-row tui-row_adaptive tui-space_bottom-5"
  *ngFor="let data of dataTable; let i = index"
>
  <div class="tui-col_lg-12">
    <h5>{{ data.tableHeader }}</h5>
  </div>
  <div
    class="tui-col_lg-12"
    *ngFor="let tableBody of data.tableBody; let j = index"
  >
    <form [formGroup]="formGroups[i]">
      <table tuiTable size="l" [columns]="headers">
        <thead tuiThead>
          <tr tuiThGroup>
            <th tuiTh [colSpan]="3">{{ tableBody.tableMainHeading }}</th>
          </tr>
          <tr tuiThGroup>
            <th tuiTh style="width: 20%">องค์ประกอบ</th>
            <th tuiTh style="width: 40%">ตัวบ่งชี้เกณฑ์คุณภาพ</th>
            <th tuiTh style="width: 40%">ระดับคุณภาพ</th>
          </tr>
        </thead>
        <ng-container>
          <tbody tuiTbody [data]="tableBody.tableInside">
            <ng-container
              *ngFor="let tableInside1 of tableBody.tableInside; let k = index"
            >
              <ng-container
                *ngFor="
                  let item of tableInside1.tablePerformance;
                  let l = index
                "
              >
                <tr *ngIf="l === 0" tuiTr>
                  <td
                    [rowSpan]="tableInside1.tablePerformance.length"
                    *tuiCell="'tableHeading'"
                    tuiTd
                  >
                    {{ tableInside1.tableHeading }}
                  </td>
                  <td *tuiCell="'topic'" tuiTd>
                    {{ item.topic }}
                  </td>
                  <td *tuiCell="'operation'" tuiTd>
                    <tui-select
                      class="select"
                      [formControl]="
                        $any(formGroups[i]).controls['tableBody'].controls[j]
                          .controls['tableInside'].controls[k].controls[
                          'tablePerformance'
                        ].controls[l].controls['selectOption']
                      "
                      [ngModelOptions]="{ updateOn: 'blur' }"
                    >
                      <tui-data-list-wrapper
                        *tuiDataList
                        [items]="operationType"
                      ></tui-data-list-wrapper>
                    </tui-select>
                  </td>
                </tr>
                <tr *ngIf="l !== 0" tuiTr>
                  <td *tuiCell="'topic'" tuiTd>
                    {{ item.topic }}
                  </td>
                  <td *tuiCell="'operation'" tuiTd>
                    <tui-select
                      class="select"
                      [formControl]="
                        $any(formGroups[i]).controls['tableBody'].controls[j]
                          .controls['tableInside'].controls[k].controls[
                          'tablePerformance'
                        ].controls[l].controls['selectOption']
                      "
                      [ngModelOptions]="{ updateOn: 'blur' }"
                    >
                      <tui-data-list-wrapper
                        *tuiDataList
                        [items]="operationType"
                      ></tui-data-list-wrapper>
                    </tui-select>
                  </td>
                </tr>
              </ng-container>
            </ng-container>
            <tr tuiTr>
              <td tuiTd>
                {{ tableBody.totalDetail }}
              </td>
            </tr>
          </tbody>
        </ng-container>
      </table>
    </form>
  </div>
</div>
<div class="tui-row tui-row_adaptive">
  <div class="tui-col_lg-12">
    <form [formGroup]="formGroups2">
      <div class="text-center">
        <h5>
          สรุปผลการตรวจสอบภาพรวมขับเคลื่อนปรัชญาของเศรษฐกิจพอเพียงสู่สถานศึกษา
        </h5>
        <tui-input
          formControlName="budgetYear"
          schoolEvaluationFormInputNumber
          class="tui-group__inherit-item tui-space_top-5"
        >
          ปีงบประมาณ
          <span class="tui-required"></span>
        </tui-input>
        <tui-field-error
          class="tui-space_bottom-5"
          formControlName="budgetYear"
        ></tui-field-error>
        <h5>สำนักงานเขตพื้นที่การศึกษาประถมศึกษาลำปาง เขต 1</h5>
      </div>
      <p>
        สรุปผลการตรวจสอบขับเคลื่อนปรัชญาของเศรษฐกิจพอเพียงสู่สถานศึกษา จุดเด่น
        จุดที่ต้องเพิ่มและพัฒนา
      </p>
      <tui-text-area
        class="tui-space_vertical-5"
        [expandable]="true"
        [tuiTextfieldMaxLength]="500"
        [tuiTextfieldLabelOutside]="true"
        formControlName="prosFeedback"
        maxlength="500"
        >จุดเด่นการขับเคลื่อนปรัชญาของเศรษฐกิจพอเพียงสู่สถานศึกษา
      </tui-text-area>
      <tui-text-area
        [expandable]="true"
        [tuiTextfieldMaxLength]="500"
        [tuiTextfieldLabelOutside]="true"
        formControlName="consFeedback"
        maxlength="500"
        >จุดที่ต้องเพิ่มและพัฒนา
      </tui-text-area>
    </form>
  </div>
</div>
